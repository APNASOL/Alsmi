import w from"./Master-8e66192d.js";import{_ as g,a as c,r as y,o as a,c as n,b as o,t,f as v,i as h,k as V,w as m,v as p,n as d,g as f,l as u,e as _}from"./app-9b4504be.js";import{s as k}from"./multiselect-33f2a26f.js";const P={layout:w,props:["userId"],created(){this.fetchCustomerRecord()},components:{Multiselect:k},data(){return{form:{first_name:"",last_name:"",email:"",current_password:"",new_password:"",confirm_password:""},formErrors:[],formStatus:"Yes",oldPasswordVisible:!1,passwordVisible:!1,confirmPasswordVisible:!1}},methods:{fetchCustomerRecord(){c.get(route("api.profile.show",this.userId),{headers:{Authorization:"Bearer "+this.$page.props.auth_token}}).then(r=>{this.form.first_name=r.data.first_name,this.form.last_name=r.data.last_name,this.form.email=r.data.email,this.existing_image=r.data.image}).catch(r=>{toastr.error(r.response.data.message)})},submit(){this.formStatus="No";let r=new FormData;r.append("id",this.userId),r.append("first_name",this.form.first_name),r.append("last_name",this.form.last_name),r.append("email",this.form.email),r.append("new_password",this.form.new_password),r.append("current_password",this.form.current_password),r.append("confirm_password",this.form.confirm_password),r.append("image",this.form.image),c.post(route("api.profile.update"),r,{headers:{Authorization:"Bearer "+this.$page.props.auth_token}}).then(s=>{toastr.success("Profile updated successfully"),this.$inertia.get(route("login"))}).catch(s=>{toastr.error(s.response.data.message),s.response.data.errors&&(this.formStatus="Yes",this.formErrors=s.response.data.errors)})},croppedImgSubmit(r){this.form.image=r},toggleOldPasswordVisibility(){this.oldPasswordVisible=!this.oldPasswordVisible},togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible},toggleConfirmPasswordVisibility(){this.confirmPasswordVisible=!this.confirmPasswordVisible}}},E={id:"main",class:"main"},x={class:"pagetitle d-flex justify-content-between"},C={class:"breadcrumb"},I={class:"breadcrumb-item"},U={class:"section"},S={class:"card"},N={class:"card-body pt-4"},B={class:"row g-3"},D={class:"col-12 col-md-6"},M={key:0,class:"invalid-feedback animated fadeIn"},O={class:"col-12 col-md-6"},z={key:0,class:"invalid-feedback animated fadeIn"},L={class:"col-12 col-md-6"},Y={key:0,class:"invalid-feedback animated fadeIn"},A={class:"col-12 col-md-6"},F={class:"input-group"},R=["type"],T={key:0,class:"invalid-feedback animated fadeIn"},j={class:"col-12 col-md-6"},q={class:"input-group"},G=["type"],H={key:0,class:"invalid-feedback animated fadeIn"},J={class:"col-12 col-md-6"},K={class:"input-group"},Q=["type"],W={key:0,class:"invalid-feedback animated fadeIn"},X={class:"mt-5"},Z={key:0,type:"submit",class:"btn btn-success"},$={key:1,class:"btn btn-success",type:"button",disabled:""};function ss(r,s,os,es,e,l){const b=y("Link");return a(),n("main",E,[o("div",x,[o("div",null,[s[12]||(s[12]=o("h1",null,t("Update Profile"),-1)),o("nav",null,[o("ol",C,[o("li",I,[v(b,{href:r.route("dashboard")},{default:h(()=>[_(t(r.$page.props.website_name),1)]),_:1},8,["href"])]),s[10]||(s[10]=o("li",{class:"breadcrumb-item"},t("Profile"),-1)),s[11]||(s[11]=o("li",{class:"breadcrumb-item active"},t("Update Profile"),-1))])])])]),o("section",U,[o("div",S,[o("div",N,[o("form",{onSubmit:s[9]||(s[9]=V((...i)=>l.submit&&l.submit(...i),["prevent"])),autocomplete:"off"},[s[20]||(s[20]=o("input",{type:"text",name:"fakeuser",style:{display:"none"}},null,-1)),s[21]||(s[21]=o("input",{type:"password",name:"fakepass",style:{display:"none"}},null,-1)),o("div",B,[o("div",D,[s[13]||(s[13]=o("label",{for:"first_name"},t("First name"),-1)),m(o("input",{type:"text",class:d(["form-control",{"invalid-bg":e.formErrors.first_name}]),id:"first_name",autocomplete:"off","onUpdate:modelValue":s[0]||(s[0]=i=>e.form.first_name=i)},null,2),[[p,e.form.first_name]]),e.formErrors.first_name?(a(),n("div",M,t(e.formErrors.first_name[0]),1)):f("",!0)]),o("div",O,[s[14]||(s[14]=o("label",{for:"last_name"},t("Last name"),-1)),m(o("input",{type:"text",class:d(["form-control",{"invalid-bg":e.formErrors.last_name}]),id:"last_name",autocomplete:"off","onUpdate:modelValue":s[1]||(s[1]=i=>e.form.last_name=i)},null,2),[[p,e.form.last_name]]),e.formErrors.last_name?(a(),n("div",z,t(e.formErrors.last_name[0]),1)):f("",!0)]),o("div",L,[s[15]||(s[15]=o("label",{for:"email"},t("Email"),-1)),m(o("input",{type:"email",class:d(["form-control",{"invalid-bg":e.formErrors.email}]),"onUpdate:modelValue":s[2]||(s[2]=i=>e.form.email=i),autocomplete:"off",readonly:""},null,2),[[p,e.form.email]]),e.formErrors.email?(a(),n("div",Y,t(e.formErrors.email[0]),1)):f("",!0)]),o("div",A,[s[16]||(s[16]=o("label",{for:"current_password"},t("Old Password"),-1)),o("div",F,[m(o("input",{type:e.oldPasswordVisible?"text":"password",class:d(["form-control",{"invalid-bg":e.formErrors.current_password}]),autocomplete:"new-password","onUpdate:modelValue":s[3]||(s[3]=i=>e.form.current_password=i)},null,10,R),[[u,e.form.current_password]]),o("span",{class:"input-group-text",onClick:s[4]||(s[4]=(...i)=>l.toggleOldPasswordVisibility&&l.toggleOldPasswordVisibility(...i))},[o("i",{class:d(l.toggleOldPasswordVisibility?"bi bi-eye-slash":"bi bi-eye")},null,2)])]),e.formErrors.current_password?(a(),n("div",T,t(e.formErrors.current_password[0]),1)):f("",!0)]),o("div",j,[s[17]||(s[17]=o("label",{for:"new_password"},t("New Password"),-1)),o("div",q,[m(o("input",{type:e.passwordVisible?"text":"password",class:d(["form-control",{"invalid-bg":e.formErrors.new_password}]),"onUpdate:modelValue":s[5]||(s[5]=i=>e.form.new_password=i),autocomplete:"off"},null,10,G),[[u,e.form.new_password]]),o("span",{class:"input-group-text",onClick:s[6]||(s[6]=(...i)=>l.togglePasswordVisibility&&l.togglePasswordVisibility(...i))},[o("i",{class:d(e.passwordVisible?"bi bi-eye-slash":"bi bi-eye")},null,2)])]),e.formErrors.new_password?(a(),n("div",H,t(e.formErrors.new_password[0]),1)):f("",!0)]),o("div",J,[s[18]||(s[18]=o("label",{for:"confirm_password"},t("Confirm Password"),-1)),o("div",K,[m(o("input",{type:e.confirmPasswordVisible?"text":"password",class:d(["form-control",{"invalid-bg":e.formErrors.confirm_password}]),id:"confirm_password","onUpdate:modelValue":s[7]||(s[7]=i=>e.form.confirm_password=i),autocomplete:"off"},null,10,Q),[[u,e.form.confirm_password]]),o("span",{class:"input-group-text",onClick:s[8]||(s[8]=(...i)=>l.toggleConfirmPasswordVisibility&&l.toggleConfirmPasswordVisibility(...i))},[o("i",{class:d(e.confirmPasswordVisible?"bi bi-eye-slash":"bi bi-eye")},null,2)])]),e.formErrors.confirm_password?(a(),n("div",W,t(e.formErrors.confirm_password[0]),1)):f("",!0)])]),o("div",X,[e.formStatus=="Yes"?(a(),n("button",Z,t("Save"))):(a(),n("button",$,s[19]||(s[19]=[_(t("Save")+" "),o("span",{class:"spinner-border spinner-border-sm",role:"status","aria-hidden":"true"},null,-1)])))])],32)])])])])}const ls=g(P,[["render",ss]]);export{ls as default};
